To win the game, go to Hagrid's hut and get the cakes, then go to Honeydukes and get the candy. Then go to the Room of Requirement and get the cloak, then go to the Potions Room and get the potion. Then go to Filch's Secret Lair to get the key. Then go to Umbridge's dungeon to get the broomstick. Lastly go back to the Great Hall and drop the broomstick to win.